function api_flickrGetPhotoInfo(e,o){$.ajax({data:{method:"flickr.photos.getInfo",api_key:flickrAPIKey,format:"json",photo_id:e},dataType:"jsonp",jsonp:"jsoncallback",url:flickrAPIUrl,success:function(e){setPhotoInfo(e,o)},error:function(e,o,r){viewModel.errors.push(new Error("Flickr API Error","Could not retrieve Flickr search data."))}})}function setPhotoInfo(e,o){o.realname(e.photo.owner.realname),o.username(e.photo.owner.username),o.description(e.photo.description._content),viewModel.photos.push(o)}function api_foursquareExplore(){$.ajax({data:{client_id:foursquareClientID,client_secret:foursquareClientSecret,ll:"37.8083,-122.4156",v:"20150717"},dataType:"jsonp",url:"https://api.foursquare.com/v2/venues/explore",success:createLocations,error:function(e,o,r){viewModel.errors.push(new Error("Foursquare API Error","Could not retrieve Foursquare data."))}}).done(function(){viewModel.createMarkers()})}function createLocations(e){$.each(e.response.groups[0].items,function(e,o){var r=o.venue.location.address+", "+o.venue.location.city+", "+o.venue.location.state+" "+o.venue.location.postalCode+", "+o.venue.location.country,t=[];o.venue.categories.forEach(function(e){t.push(e.name)});var n;n="undefined"!=typeof o.venue.categories?o.venue.categories[0].icon.prefix+"bg_32"+o.venue.categories[0].icon.suffix:"";var a=new Location(o.venue.name,r,o.tips[0].text,o.venue.location.lat,o.venue.location.lng,o.venue.rating,o.venue.ratingColor,t,n);viewModel.locations.push(a)})}function api_flickrSearch(){$.ajax({data:{method:"flickr.photos.search",api_key:flickrAPIKey,safe_search:1,content_type:1,woe_id:28288708,format:"json",per_page:20},dataType:"jsonp",jsonp:"jsoncallback",url:"https://api.flickr.com/services/rest/",success:createPhotos,error:function(e,o,r){viewModel.errors.push(new Error("Flickr API Error","Could not retrieve Flickr search data."))}})}function createPhotos(e){$.each(e.photos.photo,function(e,o){var r=new Photo(o.farm,o.server,o.id,o.secret,"b","jpg");api_flickrGetPhotoInfo(r.id(),r)}),viewModel.photos.valueHasMutated()}var flickrAPIKey="6b24b2e754fe7ea499e2db41d1daa866",flickrAPIUrl="https://api.flickr.com/services/rest",foursquareClientID="012MYNBUF2VK2SQK5C40HT0ZBX1255ZJGCG4XKYNTZ33DKE1",foursquareClientSecret="ZLIFE0L5WIZ21LUARPYY3OFFWCUWUU3IVR42IEUUREGHBL3F";