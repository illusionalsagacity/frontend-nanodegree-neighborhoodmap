!function(e){"use strict";function o(o,s){var a="https://api.flickr.com/services/rest/";e.ajax({data:{method:"flickr.photos.getInfo",api_key:h,format:"json",photo_id:o},dataType:"jsonp",jsonp:"jsoncallback",url:a,success:function(e){t(e,s)}})}function t(e,o){o.realname(e.photo.owner.realname),o.username(e.photo.owner.username),o.description(e.photo.description._content),d.photos.push(o)}function s(o){e.each(o.response.groups[0].items,function(e,o){var t=new r(o.venue.name,o.tips[0].text,o.venue.location.lat,o.venue.location.lng,o.venue.rating);d.locations.push(t)})}function a(){e.ajax({data:{client_id:p,client_secret:b,ll:"37.8083,-122.4156",v:"20150717"},dataType:"jsonp",url:"https://api.foursquare.com/v2/venues/explore",success:s})}function i(){e.ajax({data:{method:"flickr.photos.search",api_key:h,safe_search:1,content_type:1,woe_id:28288708,format:"json",per_page:20},dataType:"jsonp",jsonp:"jsoncallback",url:"https://api.flickr.com/services/rest/",success:l,error:function(e,o,t){console.log(o)}})}function n(){this.appName="Neighborhood Map",this.latitude=37.8083,this.longitude=-122.4156,this.searchTerm=ko.observable(),this.photos=ko.observableArray([]),this.myLocations=ko.observableArray([]),this.locations=ko.observableArray([]);var o=new google.maps.LatLng(37.8083,-122.4156),t={center:o,draggable:!0,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1,panControl:!1,zoom:17,zoomControl:!1},s=new google.maps.Map(document.getElementById("map-canvas"),t);this.searchFor=function(o){var t=e("#search",o).val();console.log(t),alert(t)},this.createMarkers=function(){this.locations().forEach(function(e){var o=new google.maps.Marker({position:new google.maps.LatLng(e.lat(),e.lng()),map:s,title:e.name()}),t='<div id="content"><div id="siteNotice"><h1 id="firstHeading" class="firstHeading">'+e.name()+'</h1><div id="bodyContent"><p>'+e.description()+"</p></div</div>",a=new google.maps.InfoWindow({content:t});google.maps.event.addListener(o,"click",function(){a.open(s,o)})})}}function r(e,o,t,s,a){this.name=ko.observable(e),this.description=ko.observable(o),this.lat=ko.observable(t),this.lng=ko.observable(s),this.rating=ko.observable(a)}function c(e,o,t,s,a,i,n,r,c){this.farm=ko.observable(e),this.server=ko.observable(o),this.id=ko.observable(t),this.secret=ko.observable(s),this.size=ko.observable(a),this.fileext=ko.observable(i),this.realname=ko.observable(n),this.username=ko.observable(r),this.description=ko.observable(c),this.url=ko.computed(function(){return"https://farm"+this.farm()+".staticflickr.com/"+this.server()+"/"+this.id()+"_"+this.secret()+"_"+this.size()+"."+this.fileext()},this)}function l(t){e.each(t.photos.photo,function(e,t){var s=new c(t.farm,t.server,t.id,t.secret,"b","jpg");o(s.id(),s)})}var h="6b24b2e754fe7ea499e2db41d1daa866",p="012MYNBUF2VK2SQK5C40HT0ZBX1255ZJGCG4XKYNTZ33DKE1",b="ZLIFE0L5WIZ21LUARPYY3OFFWCUWUU3IVR42IEUUREGHBL3F",d=new n;i(),a(),ko.applyBindings(d)}(jQuery);