!function e(o,r,t){function n(i,a){if(!r[i]){if(!o[i]){var c="function"==typeof require&&require;if(!a&&c)return c(i,!0);if(s)return s(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[i]={exports:{}};o[i][0].call(u.exports,function(e){var r=o[i][1][e];return n(r?r:e)},u,u.exports,e,o,r,t)}return r[i].exports}for(var s="function"==typeof require&&require,i=0;i<t.length;i++)n(t[i]);return n}({1:[function(e,o,r){var t=e("./viewmodel.js"),n=e("./photo.js"),s=e("./location.js"),i=e("./error.js");jQuery(function(e){"use strict";function o(o,t){e.ajax({data:{method:"flickr.photos.getInfo",api_key:p,format:"json",photo_id:o},dataType:"jsonp",jsonp:"jsoncallback",url:d,success:function(e){r(e,t)},error:function(e,o,r){h.errors.push(new i("Flickr API Error","Could not retrieve Flickr search data."))}})}function r(e,o){o.realname(e.photo.owner.realname),o.username(e.photo.owner.username),o.description(e.photo.description._content),h.photos.push(o)}function a(){e.ajax({data:{client_id:f,client_secret:v,ll:"37.8083,-122.4156",v:"20150717"},dataType:"jsonp",url:"https://api.foursquare.com/v2/venues/explore",success:c,error:function(e,o,r){h.errors.push(new i("Foursquare API Error","Could not retrieve Foursquare data."))}}).done(function(){h.createMarkers()})}function c(o){e.each(o.response.groups[0].items,function(e,o){var r=o.venue.location.address+", "+o.venue.location.city+", "+o.venue.location.state+" "+o.venue.location.postalCode+", "+o.venue.location.country,t=[];o.venue.categories.forEach(function(e){t.push(e.name)});var n;n="undefined"!=typeof o.venue.categories?o.venue.categories[0].icon.prefix+"bg_32"+o.venue.categories[0].icon.suffix:"";var i=new s(o.venue.name,r,o.tips[0].text,o.venue.location.lat,o.venue.location.lng,o.venue.rating,o.venue.ratingColor,t,n);h.locations.push(i)})}function l(){e.ajax({data:{method:"flickr.photos.search",api_key:p,safe_search:1,content_type:1,woe_id:28288708,format:"json",per_page:20},dataType:"jsonp",jsonp:"jsoncallback",url:"https://api.flickr.com/services/rest/",success:u,error:function(e,o,r){h.errors.push(new i("Flickr API Error","Could not retrieve Flickr search data."))}})}function u(r){e.each(r.photos.photo,function(e,r){var t=new n(r.farm,r.server,r.id,r.secret,"b","jpg");o(t.id(),t)}),h.photos.valueHasMutated()}var p="6b24b2e754fe7ea499e2db41d1daa866",d="https://api.flickr.com/services/rest",f="012MYNBUF2VK2SQK5C40HT0ZBX1255ZJGCG4XKYNTZ33DKE1",v="ZLIFE0L5WIZ21LUARPYY3OFFWCUWUU3IVR42IEUUREGHBL3F",h=new t;l(),a(),ko.applyBindings(h)})},{"./error.js":2,"./location.js":3,"./photo.js":4,"./viewmodel.js":5}],2:[function(e,o,r){var t=function(e,o){"use strict";this.title=ko.observable(e),this.description=ko.observable(o)};o.exports=t},{}],3:[function(e,o,r){var t=function(e,o,r,t,n,s,i,a,c){"use strict";this.address=ko.observable(o),this.name=ko.observable(e),this.description=ko.observable(r),this.lat=ko.observable(t),this.lng=ko.observable(n),this.rating=ko.observable(s),this.ratingColor=ko.observable(i),this.category=ko.observableArray(a),this.iconURL=ko.observable(c)};o.exports=t},{}],4:[function(e,o,r){var t=function(e,o,r,t,n,s,i,a,c){"use strict";this.farm=ko.observable(e),this.server=ko.observable(o),this.id=ko.observable(r),this.secret=ko.observable(t),this.size=ko.observable(n),this.fileext=ko.observable(s),this.realname=ko.observable(i),this.username=ko.observable(a),this.description=ko.observable(c),this.url=ko.computed(function(){return"https://farm"+this.farm()+".staticflickr.com/"+this.server()+"/"+this.id()+"_"+this.secret()+"_"+this.size()+"."+this.fileext()},this)};o.exports=t},{}],5:[function(e,o,r){var t=function(){"use strict";var e=this;e.appName="Neighborhood Map",e.latitude=37.8083,e.longitude=-122.4156,e.searchTerm=ko.observable(),e.photos=ko.observableArray(),e.locations=ko.observableArray(),e.filteredLocations=ko.computed(function(){return e.searchTerm()?ko.utils.arrayFilter(e.locations(),function(o){return o.name().toLowerCase().indexOf(e.searchTerm().toLowerCase())>=0}):e.locations()}),e.filteredLocations.subscribe(function(o){e.createMarkers()}),e.errors=ko.observableArray();var o,r,t,n=new google.maps.LatLng(37.8083,-122.4156),s={center:n,draggable:!0,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1,panControl:!1,zoom:17,zoomControl:!1},i=[],a=new google.maps.Map(document.getElementById("map-canvas"),s);e.createMarkers=function(){i.forEach(function(e){e.setMap(null)}),i.length=0,ko.utils.arrayForEach(e.filteredLocations(),function(e){var n=new google.maps.Marker({position:new google.maps.LatLng(e.lat(),e.lng()),map:a,title:e.name(),icon:e.iconURL()}),s='<div id="content"><div id="siteNotice"><h1 id="firstHeading" class="firstHeading">'+e.name()+'</h1><div id="bodyContent"><p>'+e.description()+"</p><p>"+e.address()+"</p></div></div>",c=new google.maps.InfoWindow({content:s,maxWidth:400});google.maps.event.addListener(n,"click",function(){t&&t.close(),c.open(a,n),t=c,r&&r.setIcon(o),o=n.getIcon(),n.setIcon("img/pin66.png"),r=n}),i.push(n)})}};o.exports=t},{}]},{},[1]);