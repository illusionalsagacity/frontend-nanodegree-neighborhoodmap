jQuery(function(e){"use strict";function o(o,n){e.ajax({data:{method:"flickr.photos.getInfo",api_key:c,format:"json",photo_id:o},dataType:"jsonp",jsonp:"jsoncallback",url:i,success:function(e){r(e,n)},error:function(e,o,r){l.errors.push(new Error("Flickr API Error","Could not retrieve Flickr search data."))}})}function r(e,o){o.realname(e.photo.owner.realname),o.username(e.photo.owner.username),o.description(e.photo.description._content),l.photos.push(o)}function n(){e.ajax({data:{client_id:u,client_secret:p,ll:"37.8083,-122.4156",v:"20150717"},dataType:"jsonp",url:"https://api.foursquare.com/v2/venues/explore",success:t,error:function(e,o,r){l.errors.push(new Error("Foursquare API Error","Could not retrieve Foursquare data."))}}).done(function(){l.createMarkers()})}function t(o){e.each(o.response.groups[0].items,function(e,o){var r=o.venue.location.address+", "+o.venue.location.city+", "+o.venue.location.state+" "+o.venue.location.postalCode+", "+o.venue.location.country,n=[];o.venue.categories.forEach(function(e){n.push(e.name)});var t;t="undefined"!=typeof o.venue.categories?o.venue.categories[0].icon.prefix+"bg_32"+o.venue.categories[0].icon.suffix:"";var a=new Location(o.venue.name,r,o.tips[0].text,o.venue.location.lat,o.venue.location.lng,o.venue.rating,o.venue.ratingColor,n,t);l.locations.push(a)})}function a(){e.ajax({data:{method:"flickr.photos.search",api_key:c,safe_search:1,content_type:1,woe_id:28288708,format:"json",per_page:20},dataType:"jsonp",jsonp:"jsoncallback",url:"https://api.flickr.com/services/rest/",success:s,error:function(e,o,r){l.errors.push(new Error("Flickr API Error","Could not retrieve Flickr search data."))}})}function s(r){e.each(r.photos.photo,function(e,r){var n=new Photo(r.farm,r.server,r.id,r.secret,"b","jpg");o(n.id(),n)}),l.photos.valueHasMutated()}var c="6b24b2e754fe7ea499e2db41d1daa866",i="https://api.flickr.com/services/rest",u="012MYNBUF2VK2SQK5C40HT0ZBX1255ZJGCG4XKYNTZ33DKE1",p="ZLIFE0L5WIZ21LUARPYY3OFFWCUWUU3IVR42IEUUREGHBL3F",l=new ViewModel;a(),n(),ko.applyBindings(l)});